{% ckan_extends %}

{# Author field is required for DOIs #}

{% block package_metadata_author %}

    {% block package_metadata_doi_author %}

        {% if h.mandatory_field_is_editable(package_id=data.id) %}

            {% set attrs = {} %}

        {% else %}

            {% set attrs = {'readonly': 'readonly'} %}

            <span class="info-block info-block-small">
                <i class="icon-info-sign"></i>
                <em>Dataset author</em> is a core DOI metadata field, and can no longer be changed.
            </span>

        {% endif %}

        {{ form.input('author', label=_('Author(s)'), id='field-author', placeholder=_('Joe Bloggs'), value=data.author, error=errors.author, classes=['control-medium'], is_required=true, attrs=attrs) }}

        {% block package_metadata_author_email %}
            {{ form.input('author_email', label=_('Author Email'), id='field-author-email', placeholder=_('joe@example.com'), value=data.author_email, error=errors.author_email, classes=['control-medium']) }}
        {% endblock %}

    {% endblock %}

{% endblock %}